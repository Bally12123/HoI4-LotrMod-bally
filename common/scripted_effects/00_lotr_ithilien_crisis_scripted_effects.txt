

# Happens when mordor does the Ithilien crisis focus. Scope is MOR
ithc_commence_ithilien_crisis = {

	hidden_effect = {
		GON = { ithc_set_vars = yes }
		MOR = { ithc_set_vars = yes }

		set_global_flag = ithc_ithilien_crisis_commenced

		GON = { country_event = ithc.1 }
		MOR = { country_event = ithc.2 }
	}

	custom_effect_tooltip = ithc_commence_ithilien_crisis_tt
}

ithc_set_vars = {
	hidden_effect = {
		set_variable = { ithc_pillage_decision_cost_pp = 50 }
	}
}

# Happens when GON and MOR got to war. Runs on no scope in particular
ithc_end_ithilien_crisis = {
	clr_global_flag = ithc_ithilien_crisis_commenced

	# Add the cores back that were removed
	22 = { add_core_of = GON }
	175 = { add_core_of = GON }
	173 = { add_core_of = GON }
	135 = { add_core_of = GON }
}


# THIS is the state to run effects on.
ithc_on_war_with_mordor_effects = {

	# activate debuffs and clear variables and stuff	
}


# MOR contests a state -> Gon looses core and she shitshow begins
ithc_contest_state = {

	hidden_effect = {
		force_enable_resistance = GON
		start_resistance = yes
		set_compliance = 50

		set_state_flag = ithc_contested

		set_variable = { ithc_pillage_level = 0 }

		ithc_pillage_enable_new_decision = yes
	}
	effect_tooltip = {
		start_resistance = yes

		custom_effect_tooltip = ithc_pillage_enable_new_decision_tt
	}
}

ithc_begin_pillage_decision = {
	set_state_flag = ithc_pillage_operation

	add_to_variable = { ithc_pillage_decision_cost_pp = 25 }
}

ithc_begin_unpillage_decision = {
	set_state_flag = ithc_pillage_operation

	add_to_variable = { ithc_pillage_decision_cost_pp = 25 }
}

ithc_end_pillage_decision = {
	clr_state_flag = ithc_pillage_operation
	ithc_increase_pillage_level = yes

	custom_effect_tooltip = ithc_increase_pillage_tt
}

ithc_end_unpillage_decision = {
	clr_state_flag = ithc_pillage_operation
	ithc_decrease_pillage_level = yes

	custom_effect_tooltip = ithc_decrease_pillage_tt
}

ithc_increase_pillage_level = {
	add_to_variable  = { ithc_pillage_level = 1 }

	# TODO: pillage effects:
	# - 0: no core
	# - 1: lower speed and disabled strat redeploy
	# - 2: divisions will spawn in this state at war start
	# - 3: ruin construction speed
	# - 4: Mordor annexes state
}

ithc_decrease_pillage_level = {
	subtract_from_variable  = { ithc_pillage_level = 1 }

	# TODO: pillage effects:
	# - 0: no core
	# - 1: lower speed and disabled strat redeploy
	# - 2: divisions will spawn in this state at war start
	# - 3: ruin construction speed
	# - 4: Mordor annexes state
}




