


ea_is_voting_yes = {
	is_in_array = { global.elven_alliance_members_in_favour = THIS }
}

ea_is_voting_no = {
	is_in_array = { global.elven_alliance_members_against = THIS }
}

ea_is_abstaining = {
	is_in_array = { global.elven_alliance_members_abstain = THIS }
}

ea_is_hegemony_leader = {
    # TODO
    always = no
}

ea_is_resolution_proposer = {
    # TODO
    var:ea_current_resolution_proposer = {
        tag = ROOT
    }
}

is_elven_alliance_member = {
    has_country_flag = is_elven_alliance_member
}

is_sanctioned_by_elven_alliance = {
    # TODO:
    tag = MOR
}

is_not_sanctioned_by_elven_alliance = {
    NOT = { is_sanctioned_by_elven_alliance = yes }
}

is_at_war_with_elven_alliance = {
    custom_trigger_tooltip = {
        tooltip = "[THIS.GetName] is at war with all Elven Alliance members"
        all_of_scopes = {
            array = global.elven_alliance_members
            has_war_with = THIS
        }
    }
}

is_not_at_war_with_elven_alliance = {
    custom_trigger_tooltip = {
        tooltip = "[THIS.GetName] is not at war with all Elven Alliance members"
        NOT = { is_at_war_with_elven_alliance = yes }
    }
}


can_invite_to_elven_alliance = {
    custom_trigger_tooltip = {
        tooltip = "The current Expansion Resolution allows [THIS.GetName] to invite new members"
        OR = {
            is_elves = yes
            AND = {
                has_global_flag = { flag = ea_resolution_expansion_passed value = 2 }
                is_men = yes
            }
            has_global_flag = { flag = ea_resolution_expansion_passed value = 3 }
        }
    }
}

can_propose_kick_elven_alliance = {
    custom_trigger_tooltip = {
        tooltip = "The current Expansion Resolution allows [THIS.GetName] to propose kicking members"
        OR = {
            is_elves = yes
            AND = {
                has_global_flag = { flag = ea_resolution_expansion_passed value = 2 }
                is_men = yes
            }
            has_global_flag = { flag = ea_resolution_expansion_passed value = 3 }
        }
    }
}

can_be_invited_to_elven_alliance = {
    custom_trigger_tooltip = {
        tooltip = "The current Expansion Resolution allows [THIS.GetName] to be invited"
        OR = {
            is_elves = yes
            AND = {
                has_global_flag = { flag = ea_resolution_expansion_passed value = 1 }
                is_men = yes
            }
            AND = {
                has_global_flag = { flag = ea_resolution_expansion_passed value = 2 }
                is_orcs = no
            }
            has_global_flag = { flag = ea_resolution_expansion_passed value = 3 }
        }
    }
}

ea_has_resolution_in_queue = {
    is_in_array = { global.ea_proposers_queue = THIS }
}

ea_resolution_queue_empty = {
    check_variable = { global.ea_proposers_queue^num < 1 }
}

# This is true for a single EA member. No guarantee on which one
ea_single_member_trigger = {
    check_variable = {
        var:global.elven_alliance_members^0 = ROOT
    }
}