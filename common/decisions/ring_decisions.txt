################
##### DAG ######
################


ring_decisions = {
	test = {
        icon = GFX_decision_generic_civil_support
		cost = 100

        available = {
			always = yes
        }

        # NOTE: This checks EVERY STATE to show a decision on just ONE state.
        # TODO: Improve this crappy performance memery
        target_array = global.states
        state_target = yes

        target_root_trigger = {
	        always = yes
	    }

        target_trigger = {
	        FROM = { state = global.fs_currentstate }
	    }

		visible = {
			always = yes
		}

		fire_only_once = yes

		complete_effect = {
		}
	}

	# TODO: this should appear on all states we have prepared an ambush as well
	launch_interception_attempt = {
		icon = GFX_decision_generic_civil_support
		cost = 100

		targets = { global.fs_currentstate }
		state_target = yes

		target_root_trigger = {
			has_global_flag = fs_started
		}

		target_trigger = {
			FROM = {
				state = global.fs_currentstate
			}
		}

		allowed = {
			# Northern wastes should not steal the ring
			NOT = { original_tag = NEP }
		}

		available = {
			controls_state = global.fs_currentstate
			check_variable = { global.fs_days_left_in_state > 14 }  # Need fellowship to stay for the duration of the mission
		}

		days_mission_timeout = 10

		cancel_trigger = {
			NOT = { controls_state = global.fs_currentstate }
		}

		timeout_effect = {
			ring_execute_interception_attempt = yes
		}
	}
}
