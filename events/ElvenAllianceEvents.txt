add_namespace = elven_alliance

# AI vote for resolution event
country_event = {
	id = elven_alliance.1

	hidden = yes

	mean_time_to_happen = {
        days = 10
    }

    trigger = {
        has_country_flag = is_elven_alliance_member
        is_ai = yes
        has_global_flag = ea_vote_in_progress
    }

	immediate = {
        elven_alliance_ai_vote = yes
    }
}

# Invite to elven alliance
country_event = {
	id = elven_alliance.2
	title = elven_alliance.2.t
	desc = elven_alliance.2.d
	picture = GFX_report_event_alliance
	
	is_triggered_only = yes
	
	# Ye
	option = { 
		name = elven_alliance.2.a
		ai_chance = {
			base = 20
		}
		elven_alliance_join = yes
	}

	# Nah
	option = { 
		name = elven_alliance.2.a
		ai_chance = {
			base = 1
		}
	}
}

# Vote on alliance type
country_event = {
	id = elven_alliance.3
	title = elven_alliance.3.t
	desc = elven_alliance.3.d
	picture = GFX_report_event_alliance

	timeout_days = 20
	
	is_triggered_only = yes
	
	# Hegemony
	option = { 
		name = elven_alliance.3.a
		ai_chance = {
			base = 1
			# TODO
		}
		add_to_variable = { global.ea_type_vote_hegemony = 1 }
	}

	# Martial
	option = { 
		name = elven_alliance.3.a
		ai_chance = {
			base = 1
		}

		add_to_variable = { global.ea_type_vote_martial = 1 }
	}

	# Union
	option = { 
		name = elven_alliance.3.a
		ai_chance = {
			base = 1
		}

		add_to_variable = { global.ea_type_vote_union = 1 }
	}
}

# Elven Alliance tutorial/help event
country_event = {
	id = elven_alliance.4
	title = elven_alliance.4.t
	desc = elven_alliance.4.d
	
	is_triggered_only = yes
	
	# Ye
	option = { 
		name = elven_alliance.4.a
		ai_chance = {
			base = 50
		}
		# TODO
	}
}

# Form new hegemony type (hidden)
country_event = {
	id = elven_alliance.5

	hidden = yes

	is_triggered_only = yes

	immediate = {
        if = {
			limit = {
				check_variable = { global.ea_type_vote_hegemony > global.ea_type_vote_martial }
				check_variable = { global.ea_type_vote_hegemony > global.ea_type_vote_union }
			}
			ea_set_type_hegemony = yes
		}
		else_if = {
			limit = {
				check_variable = { global.ea_type_vote_martial > global.ea_type_vote_hegemony }
				check_variable = { global.ea_type_vote_martial > global.ea_type_vote_union }
			}
			ea_set_type_martial = yes
		}
		else = {
			ea_set_type_union = yes
		}
    }
}

# Elven Alliance Hegemony leadership passed to us
country_event = {
	id = elven_alliance.6
	title = elven_alliance.6.t
	desc = elven_alliance.6.d
	
	is_triggered_only = yes
	
	# Ye
	option = { 
		name = elven_alliance.6.a
		ai_chance = {
			base = 50
		}
		# TODO
	}
}

# Elven Alliance: Type decided
country_event = {
	id = elven_alliance.7
	title = elven_alliance.7.t
	desc = elven_alliance.7.d
	
	is_triggered_only = yes
	
	# Ye
	option = { 
		name = elven_alliance.7.a
		ai_chance = {
			base = 50
		}
		# TODO
	}
}