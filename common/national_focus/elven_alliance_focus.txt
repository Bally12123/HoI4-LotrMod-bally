shared_focus = {
    id = ea_theelvenalliance
    icon = GFX_goal_lth_theelvenalliance
    
    x =8
    y =0
    offset = {
		x =42
		y =0
		trigger = {
			has_focus_tree = lothlorien
		}
	}

    cost = 5
    ai_will_do = { factor = 1 }
    prerequisite = { }
    available = {
        has_government = cooperative
        is_elves = yes
    }
    bypass = { 
        has_global_flag = ea_elven_alliance_exists
        is_elven_alliance_member = yes
    }
    completion_reward = {
        # Form Elven UN
        # Send out invites
        elven_alliance_join = yes
        every_country = {
            limit = {
                is_elves = yes
                NOT = { tag = THIS }
            }
            country_event = elven_alliance.2
        }
    }
}

joint_focus = {
    id = ea_memberexpansion
    icon = GFX_goal_lth_memberexpansion
    
    relative_position_id = ea_theelvenalliance
    x =-2
    y =1

    joint_trigger = {
		is_elven_alliance_member = yes
	}

    cost = 5
    ai_will_do = { factor = 1 }
    prerequisite = { focus = ea_theelvenalliance }
    available = {
		is_elven_alliance_member = yes
	}
    completion_reward_joint_originator = {
        # Unlocks higher member expansion tiers
        custom_effect_tooltip = ea_memberexpansion_tt
        set_global_flag = ea_expansion_advanced_resolutions_unlocked
    }
}

joint_focus = {
    id = ea_tradeagreements
    icon = GFX_goal_lth_tradeagreements
    
    relative_position_id = ea_theelvenalliance
    x =2
    y =1

    joint_trigger = {
		is_elven_alliance_member = yes
	}

    cost = 5
    ai_will_do = { factor = 1 }
    prerequisite = { focus = ea_theelvenalliance }
    available = {
		is_elven_alliance_member = yes
	}
    completion_reward_joint_originator = {
        # Unlocks trade resolutions
        custom_effect_tooltip = ea_tradeagreements_tt
        set_global_flag = ea_trade_resolutions_unlocked
    }
}

joint_focus = {
    id = ea_coordinatedsanctions
    icon = GFX_goal_lth_coordinatedsanctions
    
    relative_position_id = ea_theelvenalliance
    x =2
    y =2

    joint_trigger = {
		is_elven_alliance_member = yes
	}

    cost = 5
    ai_will_do = { factor = 1 }
    prerequisite = { focus = ea_theelvenalliance }
    available = {
		is_elven_alliance_member = yes
	}
    completion_reward_joint_originator = {
        # Unlock sanction decisions
        custom_effect_tooltip = ea_coordinatedsanctions_tt
        set_global_flag = ea_sanctions_unlocked
    }
}

joint_focus = {
    id = ea_proposalsandresolutions
    icon = GFX_goal_lth_proposalsandresolutions
    
    relative_position_id = ea_theelvenalliance
    x =0
    y =2

    joint_trigger = {
		is_elven_alliance_member = yes
	}

    cost = 5
    ai_will_do = { factor = 1 }
    prerequisite = { focus = ea_theelvenalliance }
    available = {
		is_elven_alliance_member = yes
	}
    completion_reward_joint_originator = {
        # Unlock higher tier alliance resolutions
        custom_effect_tooltip = ea_proposalsandresolutions_tt
        set_global_flag = ea_alliance_advanced_resolutions_unlocked
    }
}

joint_focus = {
    id = ea_pathtopeace
    icon = GFX_goal_lth_collectivedefenseclause
    
    relative_position_id = ea_theelvenalliance
    x =-1
    y =3

    joint_trigger = {
		is_elven_alliance_member = yes
	}

    cost = 5
    ai_will_do = { factor = 1 }
    prerequisite = { focus = ea_proposalsandresolutions }
    available = {
		is_elven_alliance_member = yes
	}
    completion_reward_joint_originator = {
        # Unlock peace 
        custom_effect_tooltip = ea_pathtopeace_tt
        set_global_flag = ea_peace_resolutions_unlocked
    }
}

joint_focus = {
    id = ea_researchcooperation
    icon = GFX_goal_lth_researchcooperation
    
    relative_position_id = ea_theelvenalliance
    x =1
    y =3

    joint_trigger = {
		is_elven_alliance_member = yes
	}

    cost = 5
    ai_will_do = { factor = 1 }
    prerequisite = { focus = ea_proposalsandresolutions }
    available = {
		is_elven_alliance_member = yes
	}
    completion_reward_joint_originator = {
        # Unlocks research decision line
        custom_effect_tooltip = ea_researchcooperation_tt
        set_global_flag = ea_research_resolutions_unlocked
    }
}

joint_focus = {
    id = ea_pooledknowledge
    icon = GFX_goal_lth_researchcooperation
    
    relative_position_id = ea_theelvenalliance
    x =1
    y =4

    joint_trigger = {
		is_elven_alliance_member = yes
	}

    cost = 5
    ai_will_do = { factor = 1 }
    prerequisite = { focus = ea_proposalsandresolutions }
    available = {
		is_elven_alliance_member = yes
	}
    completion_reward_joint_originator = {
        # Unlocks high tier research decision line
        custom_effect_tooltip = ea_pooledknowledge_tt
        set_global_flag = ea_research_advanced_resolutions_unlocked
    }
}

joint_focus = {
    id = ea_elvenharmony
    icon = GFX_goal_lth_elvenharmony
    
    relative_position_id = ea_theelvenalliance
    x =-1
    y =4

    joint_trigger = {
		is_elven_alliance_member = yes
	}

    cost = 5
    ai_will_do = { factor = 1 }
    prerequisite = { focus = ea_proposalsandresolutions }
    available = {
		is_elven_alliance_member = yes
	}
    completion_reward_joint_originator = {
        # Unlock higher tier peace
        custom_effect_tooltip = ea_elvenharmony_tt
        set_global_flag = ea_peace_advanced_resolutions_unlocked
    }
}

joint_focus = {
    id = ea_thecouncilofquendi
    icon = GFX_goal_lth_thecouncilofquendi
    
    relative_position_id = ea_theelvenalliance
    x =0
    y =5

    joint_trigger = {
		is_elven_alliance_member = yes
	}

    cost = 5
    ai_will_do = { factor = 1 }
    prerequisite = { focus = ea_proposalsandresolutions }
    available = {
		is_elven_alliance_member = yes
	}
    completion_reward_joint_originator = {
        # Start a vote on what type the alliance is going to be
        every_country = {
            limit = { is_elven_alliance_member = yes }
        }
        country_event = elven_alliance.3
    }
}

joint_focus = {
    id = ea_hegemony
    icon = GFX_goal_lth_hegemony
    
    relative_position_id = ea_theelvenalliance
    x =-2
    y =6

    joint_trigger = {
		is_elven_alliance_member = yes
	}

    cost = 5
    ai_will_do = { factor = 1 }
    prerequisite = { focus = ea_thecouncilofquendi }
    mutually_exclusive = { focus = ea_internationalorganization }
    mutually_exclusive = { focus = ea_martialalliance }
    available = {
		is_elven_alliance_member = yes
	}
    completion_reward_joint_originator = {
        # Unlock hegemony line
        custom_effect_tooltip = ea_hegemony_tt
        set_global_flag = ea_type_hegemony

        # Strongest member becomes leader
        # Updated every year or so
        # TODO
    }
}

joint_focus = {
    id = ea_executivevigour
    icon = GFX_goal_lth_executivevigour
    
    relative_position_id = ea_theelvenalliance
    x =-2
    y =7

    joint_trigger = {
		is_elven_alliance_member = yes
	}

    cost = 5
    ai_will_do = { factor = 1 }
    prerequisite = { focus = ea_thecouncilofquendi }
    available = {
		is_elven_alliance_member = yes
	}
    completion_reward_joint_originator = {
        # Unlock resolutions:
        # - only leader can propose resolutions
        # - enable veto power
        # - abolish term limits
        # TODO
    }
}

joint_focus = {
    id = ea_thepriviledgeofmembership
    icon = GFX_goal_lth_thepriviledgeofmembership
    
    relative_position_id = ea_theelvenalliance
    x =-2
    y =8

    joint_trigger = {
		is_elven_alliance_member = yes
	}

    cost = 5
    ai_will_do = { factor = 1 }
    prerequisite = { focus = ea_thecouncilofquendi }
    available = {
		is_elven_alliance_member = yes
	}
    completion_reward_joint_originator = {
        # All members have to pay tribute to the leader
        # Unlock highest tier hegemony
        set_global_flag = ea_special_advanced_resolutions_unlocked
        custom_effect_tooltip = ea_thepriviledgeofmembership_tt
    }
}

joint_focus = {
    id = ea_martialalliance
    icon = GFX_goal_lth_martialalliance
    
    relative_position_id = ea_theelvenalliance
    x =0
    y =6

    joint_trigger = {
		is_elven_alliance_member = yes
	}

    cost = 5
    ai_will_do = { factor = 1 }
    prerequisite = { focus = ea_thecouncilofquendi }
    mutually_exclusive = { focus = ea_hegemony }
    mutually_exclusive = { focus = ea_internationalorganization }
    available = {
		is_elven_alliance_member = yes
	}
    completion_reward_joint_originator = {
        # unlock martial
        custom_effect_tooltip = ea_martialalliance_tt
        set_global_flag = ea_type_martial
    }
}

joint_focus = {
    id = ea_sharedtrainingprograms
    icon = GFX_goal_lth_sharedtrainingprograms
    
    relative_position_id = ea_theelvenalliance
    x =0
    y =7

    joint_trigger = {
		is_elven_alliance_member = yes
	}

    cost = 5
    ai_will_do = { factor = 1 }
    prerequisite = { focus = ea_thecouncilofquendi }
    available = {
		is_elven_alliance_member = yes
	}
    completion_reward_joint_originator = {
        # Give a bunch of bonuses
        custom_effect_tooltip = ea_sharedtrainingprograms_tt
        set_global_flag = ea_special_advanced_resolutions_unlocked
    }
}

joint_focus = {
    id = ea_marchinunison
    icon = GFX_goal_lth_marchinunison
    
    relative_position_id = ea_theelvenalliance
    x =0
    y =8

    joint_trigger = {
		is_elven_alliance_member = yes
	}

    cost = 5
    ai_will_do = { factor = 1 }
    prerequisite = { focus = ea_thecouncilofquendi }
    available = {
		is_elven_alliance_member = yes
	}
    completion_reward_joint_originator = {
        # Create faction
        # TODO
    }
}

joint_focus = {
    id = ea_internationalorganization
    icon = GFX_goal_lth_unionofequals
    
    relative_position_id = ea_theelvenalliance
    x =2
    y =6

    joint_trigger = {
		is_elven_alliance_member = yes
	}

    cost = 5
    ai_will_do = { factor = 1 }
    prerequisite = { focus = ea_thecouncilofquendi }
    mutually_exclusive = { focus = ea_hegemony }
    mutually_exclusive = { focus = ea_martialalliance }
    available = {
		is_elven_alliance_member = yes
	}
    completion_reward_joint_originator = {
        custom_effect_tooltip = ea_internationalorganization_tt
        set_global_flag = ea_type_union
    }
}

joint_focus = {
    id = ea_wardeterrence
    icon = GFX_goal_lth_thesentinelnetwork
    
    relative_position_id = ea_theelvenalliance
    x =2
    y =7

    joint_trigger = {
		is_elven_alliance_member = yes
	}

    cost = 5
    ai_will_do = { factor = 1 }
    prerequisite = { focus = ea_thecouncilofquendi }
    available = {
		is_elven_alliance_member = yes
	}
    completion_reward_joint_originator = {
        # TODO
    }
}

joint_focus = {
    id = ea_advanceddiplomacy
    icon = GFX_goal_lth_theemissariesguild
    
    relative_position_id = ea_theelvenalliance
    x =2
    y =8

    joint_trigger = {
		is_elven_alliance_member = yes
	}

    cost = 5
    ai_will_do = { factor = 1 }
    prerequisite = { focus = ea_thecouncilofquendi }
    available = {
		is_elven_alliance_member = yes
	}
    completion_reward_joint_originator = {
        custom_effect_tooltip = ea_advanceddiplomacy_tt
        set_global_flag = ea_special_advanced_resolutions_unlocked
    }
}